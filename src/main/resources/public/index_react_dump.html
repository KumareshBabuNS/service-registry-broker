<!doctype html>
<html>
<head>
<title>Service Registry Broker</title>
<link href="css/angular-bootstrap.css" rel="stylesheet">

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<style type="text/css">
[ng\:cloak], [ng-cloak], .ng-cloak {
  display: none !important;
}
</style>
</head>

<body ng-app="myApp">

  <h2 class="normal" align="center"> Service Registry Broker </h2>
  <div class="container">    
    <div > 
        <div align="right" ng-controller="serviceSearchCtrl">
        <form ng-submit="submit()" class="form-horizontal" novalidate>
	      Search: <input type="text" ng-model="name"/>
	    </form>
    	<div class="panel panel-normal" >
    	<table>
    	<tr ng-repeat="serviceName in serviceNames">
    	 <td> {{ serviceName }} </td>
    	 <tr>    	 
    	 </table>
    	 
        </div>
    
		
		<div class="panel panel-default" ng-controller="servicesCtrl">
			  <!-- Default panel contents -->
			  <div class="panel-heading">Services</div>
			  
			  <!-- Table -->
			  <table class="table">
			    <tr ng-repeat="serviceDefn in services | filter: name">
					<td>
					<div class="panel panel-primary" >
					  <div class="panel-heading">
					    <a data-toggle="collapse" href="#{{ serviceDefn.name }}">
					    	 <font size=4 color="white">{{ serviceDefn.name }} </font> 
					    	<img data-src="{{serviceDefn.metadata.imageUrl}{/300x200" alt="">					    	
					    </a>
					     
					  </div>
					  <div id="{{serviceDefn.name}}" class="panel-collapse collapse">
					  
					  	 <div ng-controller="gotoPage">
					     <br> <button class="btn btn-info btn-sm" ng-click="gotoPage('edit', serviceDefn.name)">  Edit  </button>
					     </div>
					     
						  <div class="panel-body">
						    <table class="table">
							    <tr><td>
							    {{ serviceDefn.description }} by {{ serviceDefn.metadata.displayName }} 
							    </td></tr>
							    <tr><td>
							    Provider Detail: {{ serviceDefn.metadata.providerDisplayName }}
							    </td></tr>
							    
							    <tr><td>
							    
							    <div class="panel panel-success">
								  <div class="panel-heading">
								    <h4 class="panel-title">Plans </h4>
								  </div>
							    </td></tr>
							    
							    
							      <div class="panel-body">
							    
								      <tr ng-repeat="plan in serviceDefn.plans">
								      	<td>
								      	   &nbsp;
								      	   <table class="table table-striped">
								      	   	<thead>
								      	   	<tr><th>Name</th><th>Free</th><th>Description</th><th> Tags</th> </tr>
								      	   	</thead>
								      	   	<tbody>
								      	   	<tr>
								      	   		<td class="col-md-2">
											    	<b>{{ plan.name }}</b>
											    </td>
											   <td class="col-md-1">
											    	{{ plan.free }} 
											    </td>
											    <td class="col-md-3">
											    	{{ plan.description }}
											    </td>
											    <td class="col-md-4">
											    	{{ plan.bullets }}
											    </td>
										    </tr>
										    	
										    </tbody>
								      	   </table>
								      	   
								      	   <table>
										    <tr>
										    
										    	<div class="panel panel-normal" ng-controller="getCredentialsForPlanCtrl" >
										    		 <div class="panel-heading">
													    <a data-toggle="collapse" href="#{{plan.id}}" ng-click="getCreds(plan.id)">
													    	<h4 class="panel-title">Show associated credentials </h4> 
													    </a>
													 </div>
													<div id="{{plan.id}}" class="panel-collapse collapse">	 
														 <div class="panel-body">
														 
														 {{ credentials[0] }}
 														 <table>
													      <tr ng-repeat="(key, value) in credentials[0]">
													      	<td>
													      	   {{ key }}
													      	</td>   
													      	<td>
													      	  {{ value }}
													      	</td>
												      	</tr> 
												      	</table>  
														 </div>
													</div>		 
										    	</div>
										    
										    
										    	</tr>
										    	
										   </table>
								      	   
								      	</td>
								      </tr>
							      </div>
						    </table>
						  </div>
					  </div>
					</div>
				</tr>
			  </table>
			</div>
		
	</div> 

  </div>
  
  <script src="js/angular.min.js"></script>
  <script src="js/app.js"></script>
</body>
</html>